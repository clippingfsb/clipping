<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Clipping de Not√≠cias - Final TV/R√°dio</title>
  <style>
    /* Todo o seu CSS original permanece INALTERADO aqui */
    :root {
      --primary-color: #4a90e2;
      --secondary-color: #f5f7fa;
      --accent-color: #34c759;
      --danger-color: #ff3b30;
      --warning-color: #ffcc00;
      --text-main: #2c3e50;
      --text-muted: #7f8c8d;
      --bg-card: #ffffff;
      --border-color: #dcdde1;
      --shadow: 0 4px 6px rgba(0,0,0,0.05), 0 1px 3px rgba(0,0,0,0.1);
      --font-size-base: 1.1rem;
      --font-size-small: 0.95rem;
      --font-size-title: 1rem;
    }
    body {
      background-color: #f0f2f5;
      color: var(--text-main);
      font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
      margin: 0;
      padding: 15px;
      line-height: 1.4;
      font-size: var(--font-size-base);
    }
    .container { max-width: 1100px; margin: 0 auto; }
    .title {
      font-weight: 700;
      color: var(--text-main);
      font-size: var(--font-size-title);
      text-transform: uppercase;
      letter-spacing: 0.8px;
      margin: 0 0 6px 0;
    }
    .cors-instruction {
      background-color: #fff3cd;
      border-left: 5px solid var(--warning-color);
      color: #856404;
      padding: 10px 20px;
      border-radius: 8px;
      margin-bottom: 15px;
      font-size: var(--font-size-small);
      box-shadow: var(--shadow);
    }
    .cors-instruction a { color: #856404; font-weight: bold; text-decoration: underline; }
    .section-form, .section-tabela {
      background-color: var(--bg-card);
      border-radius: 12px;
      padding: 20px;
      margin-bottom: 15px;
      box-shadow: var(--shadow);
    }
    .form-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px 20px;
    }
    .form-group { margin-bottom: 12px; }
    .form-group.full-width { grid-column: 1 / -1; }
    input, textarea, select {
      background-color: #f8f9fa;
      color: var(--text-main);
      border: 2px solid var(--border-color);
      border-radius: 8px;
      padding: 10px 15px;
      width: 100%;
      box-sizing: border-box;
      font-size: var(--font-size-base);
      transition: border-color 0.2s, box-shadow 0.2s;
    }
    input:focus, textarea:focus, select:focus {
      outline: none;
      border-color: var(--primary-color);
      box-shadow: 0 0 0 4px rgba(74,144,226,0.15);
    }
    textarea#tag-input { min-height: 200px; resize: vertical; }
    .radio-group {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      background: #f8f9fa;
      padding: 8px;
      border-radius: 8px;
      border: 2px solid var(--border-color);
    }
    .radio-option {
      display: flex;
      align-items: center;
      cursor: pointer;
      padding: 6px 15px;
      border-radius: 6px;
      transition: background 0.2s;
    }
    .radio-option:hover { background: #edf2f7; }
    .radio-option input { width: auto; margin-right: 8px; transform: scale(1.1); }
    .radio-option label { cursor: pointer; font-weight: 500; font-size: var(--font-size-base); }
    .radio-option input:checked + label { color: var(--primary-color); font-weight: 700; }
    .btn-container {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      align-items: center;
    }
    .btn {
      padding: 10px 20px;
      border: none;
      cursor: pointer;
      font-size: var(--font-size-base);
      font-weight: 500;
      border-radius: 8px;
      transition: all 0.2s;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      height: 42px;
      white-space: nowrap;
    }
    .btn-success { background-color: var(--accent-color); color: white; box-shadow: 0 3px 8px rgba(52,199,89,0.2); }
    .btn-success:hover { background-color: #2fb34f; transform: translateY(-1px); }
    .btn-outline { background-color: transparent; border: 2px solid var(--border-color); color: var(--text-muted); }
    .btn-outline:hover { border-color: var(--primary-color); color: var(--primary-color); }

    #btn-colar-link {
      background-color: var(--primary-color);
      color: white;
    }
    #btn-colar-link:hover {
      background-color: #357abd;
      transform: translateY(-1px);
    }

    #btn-colar-materia {
      display: block;
      margin: 12px auto 0;
      background-color: #10b981;
      color: white;
      width: auto;
      min-width: 180px;
    }
    #btn-colar-materia:hover {
      background-color: #059669;
      transform: translateY(-1px);
    }

    .shortlink-container {
      display: flex;
      gap: 10px;
      align-items: center;
      flex-wrap: wrap;
    }
    .shortlink-container input {
      flex: 3;
      min-width: 250px;
    }
    .shortlink-container .btn {
      flex: 1;
      min-width: 160px;
    }
    .preview-box {
      background-color: #f8f9fa;
      border: 2px dashed var(--border-color);
      border-radius: 12px;
      padding: 15px;
      margin-top: 15px;
      position: relative;
    }
    .preview-content {
      white-space: pre-wrap;
      font-size: var(--font-size-base);
      color: #333;
      min-height: 60px;
      line-height: 1.4;
    }
    .preview-actions {
      display: flex;
      justify-content: center;
      gap: 15px;
      margin-top: 15px;
      padding-top: 15px;
      border-top: 2px solid var(--border-color);
    }
    .table-wrapper { overflow-x: auto; -webkit-overflow-scrolling: touch; }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px;
    }
    th {
      text-align: left;
      padding: 12px 15px;
      background-color: #f8f9fa;
      color: var(--text-muted);
      font-size: var(--font-size-small);
      text-transform: uppercase;
      border-bottom: 3px solid var(--border-color);
    }
    td {
      padding: 12px 15px;
      border-bottom: 1px solid #eee;
      vertical-align: top;
    }
    tr:hover { background-color: #fafafa; }
    .materia-cell {
      font-size: var(--font-size-small);
      white-space: pre-wrap;
      word-break: break-word;
      overflow-wrap: break-word;
      hyphens: auto;
      line-height: 1.45;
    }
    #loading {
      font-weight: 800;
      color: var(--primary-color);
      margin-left: 10px;
      display: none;
      animation: pulse 1.5s infinite;
    }
    @keyframes pulse { 0%,100% {opacity:0.6} 50% {opacity:1} }
    .auto-filled {
      border: 2px solid #ffcc00 !important;
      background-color: #fffacd !important;
    }
    /* RESPONSIVIDADE MOBILE */
    @media (max-width: 768px) {
      body { padding: 10px; font-size: 1rem; }
      .form-grid { grid-template-columns: 1fr; gap: 16px; }
      #btn-colar-materia { width: 100%; max-width: 260px; margin: 16px auto 0; }
      .btn-container, .shortlink-container, .preview-actions {
        flex-direction: column;
        gap: 12px;
        align-items: stretch;
      }
      .shortlink-container input, .shortlink-container .btn, .btn { width: 100%; }
      .table-wrapper { overflow-x: hidden; }
      #materias-tabela thead { display: none; }
      #materias-tabela tr {
        display: block;
        margin-bottom: 24px;
        border: 1px solid #ddd;
        border-radius: 12px;
        background: white;
        box-shadow: 0 3px 8px rgba(0,0,0,0.08);
      }
      #materias-tabela td {
        display: block;
        padding: 16px;
        border-bottom: 1px solid #f0f0f0;
        position: relative;
        padding-left: 40%;
      }
      #materias-tabela td:before {
        content: attr(data-label);
        position: absolute;
        left: 16px;
        top: 16px;
        width: 35%;
        font-weight: 600;
        color: #444;
        font-size: 1rem;
        white-space: nowrap;
      }
      #materias-tabela td[data-label="Data/Hora"]:before { content: "Data/Hora"; }
      #materias-tabela td[data-label="Mat√©ria Completa"]:before {
        content: "Mat√©ria Completa";
        white-space: normal;
        line-height: 1.3;
        width: 35%;
      }
      #materias-tabela td:last-child {
        border-bottom: none;
        padding: 16px;
        display: flex !important;
        justify-content: center !important;
        align-items: center;
        gap: 32px;
        flex-wrap: nowrap;
      }
      .materia-cell {
        padding-left: 40% !important;
        overflow-wrap: break-word;
        hyphens: auto;
      }
      #materias-tabela .btn-outline {
        flex: 0 0 auto;
        width: 60px;
        height: 60px;
        font-size: 1.5rem;
        padding: 0;
        border-radius: 12px;
        background: #f8f9fa;
        border: 1px solid #ccc;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: background 0.2s;
      }
      #materias-tabela .btn-outline:hover,
      #materias-tabela .btn-outline:active {
        background: #e8e8e8;
      }
    }
    @media (max-width: 480px) {
      #materias-tabela td { padding-left: 45%; }
      #materias-tabela td:before { width: 40%; }
      .materia-cell { padding-left: 45% !important; }
      #materias-tabela td:last-child { gap: 24px; }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="cors-instruction">
      <p><strong>Importante:</strong> Para extra√ß√£o autom√°tica, primeiro ative o acesso tempor√°rio em <a href="https://cors-anywhere.herokuapp.com/" target="_blank">cors-anywhere.herokuapp.com</a>, clicando em <strong>‚ÄúRequest temporary access to the demo server‚Äù</strong>. Depois volte a esta p√°gina e cole o link encurtado no campo correspondente.</p>
    </div>
    <section class="section-form">
      <div class="form-grid">
        <div class="form-group full-width">
          <p class="title">Classifica√ß√£o</p>
          <div class="radio-group" id="classificacao">
            <div class="radio-option"><input type="radio" name="classificacao" id="option1" value="üóû" /><label for="option1">Impresso</label></div>
            <div class="radio-option"><input type="radio" name="classificacao" id="option2" value="üåê" checked /><label for="option2">Online Nacional</label></div>
            <div class="radio-option"><input type="radio" name="classificacao" id="option5" value="Internacional" /><label for="option5">Internacional</label></div>
            <div class="radio-option"><input type="radio" name="classificacao" id="option3" value="üì∫" /><label for="option3">TV</label></div>
            <div class="radio-option"><input type="radio" name="classificacao" id="option4" value="üìª" /><label for="option4">R√°dio</label></div>
          </div>
        </div>

        <div class="form-group full-width">
          <p class="title">Link curto (cole aqui para preencher os campos abaixo automaticamente) <span id="loading">Processando...</span></p>
          <div class="shortlink-container">
            <input id="link-curto" type="text" placeholder="Cole o link encurtado aqui">
            <div class="btn-container">
              <button class="btn btn-secondary" id="btn-colar-link" type="button">Colar link curto</button>
            </div>
          </div>
        </div>

        <div class="form-group">
          <p class="title">Ve√≠culo</p>
          <input class="veiculos" type="text" placeholder="Ex: CNN Brasil online" list="veiculo-dropdown" />
          <datalist id="veiculo-dropdown"></datalist>
        </div>

        <div class="form-group">
          <p class="title">Blog / Coluna</p>
          <input class="blog-coluna" type="text" placeholder="Ex: Tain√° Falc√£o" list="coluna-dropdown" />
          <datalist id="coluna-dropdown"></datalist>
        </div>

        <div class="form-group full-width">
          <p class="title">Not√≠cia</p>
          <textarea id="tag-input" placeholder="Digite ou cole a not√≠cia aqui..."></textarea>
          <button class="btn btn-secondary" id="btn-colar-materia" type="button">üìÑ Colar not√≠cia</button>
        </div>

        <div class="form-group full-width">
          <p class="title">Data/Hora de Publica√ß√£o <small>(obrigat√≥ria para Comunica√ß√µes - DD/MM/YYYY HH:MM)</small></p>
          <input id="data-hora-publicacao" type="text" placeholder="Ex: 26/01/2026 14:30" />
        </div>

        <div class="form-group">
          <p class="title">Cargo</p>
          <select id="tipo-ministro">
            <option value="nenhum">Nenhum</option>
            <option value="presidente">Presidente</option>
            <option value="ministro">Ministro</option>
            <option value="ministra">Ministra</option>
          </select>
        </div>

        <div class="form-group">
          <p class="title">√ìrg√£o / Minist√©rio</p>
          <select id="ministerio">
            <option value="">Selecionar o √≥rg√£o</option>
          </select>
        </div>
      </div>

      <div class="preview-box">
        <p class="title" style="color: var(--primary-color)">Pr√©via da Mensagem</p>
        <div id="preview-area" class="preview-content"></div>
        <div class="preview-actions">
          <button class="btn btn-success btn-copiar">‚Üí Gerar e Copiar</button>
          <button class="btn btn-outline btn-resetar">√ó Limpar</button>
          <button class="btn btn-outline btn-desfazer">‚Ü∫ Desfazer</button>
        </div>
      </div>
    </section>

    <section class="section-tabela">
      <h2 class="title" style="font-size: 1.2rem; margin-bottom: 15px;">Hist√≥rico de mensagens</h2>
      <div class="table-wrapper">
        <table id="materias-tabela">
          <thead>
            <tr>
              <th style="width: 140px;">Data/Hora</th>
              <th>Mensagem gerada</th>
              <th style="width: 110px;">A√ß√µes</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </section>
  </div>

  <script src="https://code.jquery.com/jquery-3.6.1.min.js"></script>
  <script>
    "use strict";
    let blueParrot = {
      link: "", classifica√ß√£o: "üåê ", veiculo: "", coluna: "", tags: "",
      linkCurto: "", tipoMinistro: "nenhum", ministerio: "",
      ministerioStr: "", alertaPrefix: "",
      dataHoraPublicacao: "",
      dataHoraPublicacaoExtraida: ""
    };
    let backup = {};
    const linkCurto = document.querySelector("#link-curto");
    const radioButtons = document.querySelectorAll("input[name='classificacao']");
    const veiculos = document.querySelector(".veiculos");
    const blogColuna = document.querySelector(".blog-coluna");
    const tagInput = document.querySelector("#tag-input");
    const dataHoraInput = document.querySelector("#data-hora-publicacao");
    const tipoMinistroSelect = document.querySelector("#tipo-ministro");
    const ministerioSelect = document.querySelector("#ministerio");
    const loading = document.querySelector("#loading");
    const previewArea = document.querySelector("#preview-area");

    const vehiclesByClassification = {
      "Impresso": ["Folha de S.Paulo", "O Estado de S. Paulo", "O Globo", "Valor Econ√¥mico", "Correio Braziliense"],
      "Online": [
        "Ag√™ncia Brasil", "Ag√™ncia C√¢mara", "Ag√™ncia Senado", "BBC News Brasil", "Bloomberg Brasil",
        "Bloomberg L√≠nea", "Brasil 247", "Carta Capital online", "CBN", "CNN Brasil online",
        "Congresso em Foco", "Correio Braziliense online", "Cruso√©", "√âpoca Neg√≥cios", "√âpoca Online",
        "Estad√£o online", "Exame on-line", "Exame online", "Extra online", "FDR", "Folha online",
        "g1", "ICL Not√≠cias", "iG", "InfoMoney", "Isto√â Dinheiro online", "Isto√â online",
        "Jota", "Jovem Pan online", "Metr√≥poles", "Money Times", "O Antagonista", "O Bastidor",
        "O Globo online", "Plat√¥BR", "Poder360", "R7", "Terra", "UOL", "Valor Investe", "Valor online",
        "Veja online", "Yahoo!"
      ],
      "Internacional": [
        "AFP ‚Äì Agence France Presse", "Ag√™ncia EFE", "Ag√™ncia EFE ‚Äì Espanhol", "Ag√™ncia EFE ‚Äì Ingl√™s",
        "Ag√™ncia Xinhua", "ANSA Brasil", "Associated Press", "BBC News", "Bloomberg", "Bloomberg Markets",
        "CCTV News", "CGTN Online", "Chicago Tribune", "Clar√≠n Online ‚Äì Argentina", "Corriere della Sera",
        "Corriere della Sera Online", "Daily Maverick ‚Äì √Åfrica do Sul", "Daily Sabah ‚Äì Turquia", "Dallas News",
        "Dan Tri", "De Telegraaf", "Der Spiegel Online", "Deutsche Welle", "Diario Clar√≠n ‚Äì Argentina",
        "Die Zeit", "El Comercio ‚Äì Equador", "El Comercio ‚Äì Peru", "El Comercio Online ‚Äì Peru", "El Mercurio",
        "El Nacional Online ‚Äì Venezuela", "El Pa√≠s ‚Äì Espanha", "El Pa√≠s ‚Äì Uruguai", "El Pa√≠s Online ‚Äì Espanha",
        "El Pa√≠s Online ‚Äì Uruguai", "El Tiempo ‚Äì Col√¥mbia", "El Universal ‚Äì M√©xico", "El Universal ‚Äì Venezuela",
        "El Universal Diario ‚Äì Venezuela", "Expresso", "Financial Times Online", "Foreign Affairs", "Foreign Policy",
        "Fox Business", "Fox News", "France 24 Online", "Frankfurter Allgemeine Zeitung", "Global Times", "Jiji",
        "Jornal de Angola", "Jornal Expans√£o Online", "Kyodo", "La Naci√≥n ‚Äì Argentina", "La Naci√≥n ‚Äì Paraguai",
        "La Naci√≥n Online ‚Äì Argentina", "La Naci√≥n Online ‚Äì Paraguai", "La Raz√£o Online ‚Äì Bol√≠via",
        "La Rep√∫blica ‚Äì Peru", "Le Courrier du Vietnam", "Le Figaro", "Le Figaro Online", "Le Monde Online",
        "Les Echos Online", "Lib√©ration", "Los Angeles Times", "Los Angeles Times Online", "M√©xico ‚Äì El Universal Online",
        "Nation ‚Äì Qu√™nia", "Nature Online", "Nh√£n D√¢n", "Nikkei", "Not√≠cias Mo√ßambique", "Novo Jornal ‚Äì Angola",
        "P√°gina Siete Online ‚Äì Bol√≠via", "Politico Online", "P√∫blico ‚Äì Portugal", "Reuters", "SABC News ‚Äì √Åfrica do Sul",
        "South China Morning Post ‚Äì Hong Kong", "Sputnik News", "TBS ‚Äì Jap√£o", "TBS News Dig", "The Economist",
        "The Epoch Times", "The Globe and Mail", "The Globe and Mail Online", "The Guardian", "The Guardian ‚Äì Nig√©ria",
        "The Hindu", "The Jakarta Post", "The Jerusalem Post", "The Korea Times Online", "The New York Times",
        "The New York Times Online", "The Spectator", "The Sydney Morning Herald", "The Telegraph Online",
        "The Tehran Times", "The Times ‚Äì √Åfrica do Sul", "The Times of India", "The Wall Street Journal",
        "The Wall Street Journal Online", "The Washington Post", "The Washington Post Online", "The Washington Times",
        "The Yomiuri Shimbun", "Tuoi Tre Online", "USA Today", "Vanguard ‚Äì Nig√©ria", "Viet Nam News", "VN Express"
      ],
      "TV": ["TV AgroMais", "TV BandNews", "TV Band", "TV Brasil", "TV C√¢mara", "TV CNN Brasil", "TV Cultura", "TV GloboNews", "TV Jovem Pan News", "TV NBR", "TV Record", "TV Record News", "TV Rede Globo Nacional", "TV RedeTV!", "TV SBT", "TV Senado", "TV Times Brasil CNBC"],
      "R√°dio": ["R√°dio BandNews FM", "R√°dio Bandeirantes FM", "R√°dio CBN FM", "R√°dio Jovem Pan FM", "R√°dio Nacional FM"]
    };

    const veiculoBlogColunaMap = {
      // Seu mapa completo original continua aqui (sem altera√ß√£o)
      "BBC News Brasil": [],
      "Bloomberg Brasil": [],
      "Bloomberg L√≠nea": [],
      "Brasil 247": [],
      "Carta Capital online": [],
      "CBN": [],
      "CNN Brasil online": [
        "Caio Junqueira", "Clarissa Oliveira", "Gustavo Uribe", "Iuri Pitta",
        "Jussara Soares", "Pedro Venceslau", "Tain√° Falc√£o", "Teo Cury"
      ],
      "Congresso em Foco": ["Opini√£o"],
      "Correio Braziliense online": ["Blog da Denise", "Blog do Vicente", "Blog CB Poder"],
      "Cruso√©": [],
      "Estad√£o online": [
        // ... todo o resto do seu Estad√£o, Folha, etc. continua igual
      ],
      // ... (mantenha exatamente o seu veiculoBlogColunaMap original)
    };

    // ... (dominioVeiculoMap, orgaosPorCargo, nomeCompletoOrgao, nomeSimplificadoOrgao continuam iguais)

    function saveToLocal(materia) {
      // sua fun√ß√£o original
    }

    function deleteFromLocal(id) {
      // sua fun√ß√£o original
    }

    function loadFromLocal() {
      // sua fun√ß√£o original
    }

    function updateVehicleDropdown(classification) {
      const datalist = document.getElementById("veiculo-dropdown");
      datalist.innerHTML = "";
      const vehiclesToShow = vehiclesByClassification[classification] || [];
      vehiclesToShow.forEach(vehicle => {
        const option = document.createElement("option");
        option.value = vehicle;
        datalist.appendChild(option);
      });
    }

    function updateColumnDropdown(classification, veiculo) {
      // sua fun√ß√£o original
    }

    function updateMinisterioOptions() {
      // sua fun√ß√£o original
    }

    function atualizarTexto() {
      // sua fun√ß√£o original
    }

    function renderPreview() {
      // sua fun√ß√£o original
    }

    radioButtons.forEach(radio => {
      radio.addEventListener("change", (e) => {
        const val = e.target.value;
        const label = e.target.nextElementSibling.textContent;
        blueParrot.classifica√ß√£o = val + " ";
        updateVehicleDropdown(label);  // Usa o LABEL (texto vis√≠vel) que corresponde √†s chaves
        renderPreview();
      });
    });

    // ... (todos os outros eventos: veiculos.input, blogColuna.input, tagInput.input, linkCurto.input, btn-colar-link, btn-colar-materia, processarShortlink, extrairTexto, etc. continuam exatamente iguais ao seu c√≥digo funcional)

    window.onload = () => {
      updateVehicleDropdown("Online");  // Carrega Online por padr√£o (como no seu c√≥digo)
      updateMinisterioOptions();
      const historico = loadFromLocal();
      historico.forEach(item => {
        adicionarMateriaTabela(item.id, item.materia, item.timestamp);
      });
    };
  </script>
</body>
</html>
